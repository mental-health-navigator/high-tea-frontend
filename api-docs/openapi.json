{"openapi":"3.1.0","info":{"title":"Mental Health Service Navigator API","version":"0.1.0"},"paths":{"/search/_ready":{"get":{"tags":["search"],"summary":"Ready","operationId":"ready_search__ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/search/semantic":{"post":{"tags":["search"],"summary":"Semantic","description":"Returns top-N similar services via Supabase RPC core.find_similar_services.\nApplies env-driven confidence/disambiguation flags in the service layer.","operationId":"semantic_search_semantic_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SemanticSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SemanticSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chat/":{"post":{"tags":["chat"],"summary":"Chat","description":"Conversational chat endpoint with per-session memory","operationId":"chat_chat__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ChatRequest":{"properties":{"message":{"type":"string","title":"Message"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}},"type":"object","required":["message"],"title":"ChatRequest"},"ChatResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"reply":{"type":"string","title":"Reply"},"services":{"items":{},"type":"array","title":"Services"},"top1_similarity":{"type":"number","title":"Top1 Similarity"},"disambiguation_needed":{"type":"boolean","title":"Disambiguation Needed"},"conversation_length":{"type":"integer","title":"Conversation Length"},"request_service_change":{"type":"boolean","title":"Request Service Change"}},"type":"object","required":["session_id","reply","services","top1_similarity","disambiguation_needed","conversation_length","request_service_change"],"title":"ChatResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"SearchHit":{"properties":{"service_campus_key":{"type":"string","title":"Service Campus Key"},"organisation_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Organisation Name"},"service_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Name"},"campus_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Campus Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"suburb":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suburb"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"postcode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postcode"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"website":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website"},"costs":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Costs"},"referral_pathways":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Referral Pathways"},"target_populations":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Populations"},"delivery_methods":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Methods"},"levels_of_care":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Levels Of Care"},"expected_wait_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Wait Time"},"op_hours_24_7":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Op Hours 24 7"},"op_hours_standard":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Op Hours Standard"},"op_hours_extended":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Op Hours Extended"},"op_hours_extended_details":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Op Hours Extended Details"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"eligibility_and_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Eligibility And Description"},"cosine_similarity":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cosine Similarity"}},"type":"object","required":["service_campus_key"],"title":"SearchHit"},"SemanticSearchRequest":{"properties":{"query":{"type":"string","minLength":2,"title":"Query"},"similarity_threshold":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Similarity Threshold","default":0.0},"max_results":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Results","default":5}},"type":"object","required":["query"],"title":"SemanticSearchRequest"},"SemanticSearchResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/SearchHit"},"type":"array","title":"Items"},"top1_similarity":{"type":"number","title":"Top1 Similarity"},"disambiguation_needed":{"type":"boolean","title":"Disambiguation Needed"}},"type":"object","required":["items","top1_similarity","disambiguation_needed"],"title":"SemanticSearchResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}